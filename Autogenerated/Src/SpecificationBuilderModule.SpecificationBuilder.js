define("SpecificationBuilderModule", ["BaseSchemaModuleV2", "SpecificationBuilder"],
	function() {
		/**
		 * ###### ### ######## SpecificationBuilder.
		 */
		Ext.define("Terrasoft.configuration.SpecificationBuilderModule", {
			extend: "Terrasoft.BaseSchemaModule",
			alternateClassName: "Terrasoft.SpecificationBuilderModule",

			/**
			 * @inheritDoc Terrasoft.BaseSchemaModule#init
			 * @overridden
			 */
			init: function() {
				this.subscribeMessages();
				this.callParent(arguments);
			},

			/**
			 * @inheritDoc Terrasoft.BaseSchemaModule#initSchemaName
			 * @overridden
			 */
			initSchemaName: function() {
				this.schemaName = this.sandbox.publish("GetSpecificationBuilderSchemaName", null, [this.sandbox.id]) ||
					"SpecificationBuilder";
			},

			/**
			 * @inheritDoc Terrasoft.BaseSchemaModule#getViewContainerId
			 * @overridden
			 */
			getViewContainerId: function() {
				return this.schemaName + this.autoGeneratedContainerSuffix + this.Terrasoft.generateGUID();
			},

			/**
			 * ############# ## #########.
			 * @protected
			 */
			subscribeMessages: function() {
				this.sandbox.subscribe("RerenderBuilder", function(config) {
					var renderTo = this.Ext.get(config.containerId);
					if (this.viewModel && renderTo) {
						this.render(renderTo);
					}
				}, this, [this.sandbox.id]);
			},

			/**
			 * ######## ######### ####### # ####### #########, #### ### ############# ###### ########## ## ########.
			 * @protected
			 * @overridden
			 */
			initHistoryState: Ext.emptyFn
		});

		return Terrasoft.SpecificationBuilderModule;
	});
